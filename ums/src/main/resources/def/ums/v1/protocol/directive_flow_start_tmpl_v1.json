{
  "protocol": {
    "type": "directive_flow_start"
  },
  "schema": {
    "namespace": "oracle.oracle01.db.table.v2.dbpar01.tablepar01",
    "fields": [
      {
        "name": "directive_id",
        "type": "long",
        "nullable": false
      },
      {
        "name": "stream_id",
        "type": "long",
        "nullable": false
      },
      {
        "name": "flow_id",  //add
        "type": "long",
        "nullable": false
      },
      {
        "name": "ums_ts_",
        "type": "datetime",
        "nullable": false
      },
      {
        "name": "sink_namespace",
        "type": "string",
        "nullable": false
      },{
        "name": "consumption_protocol",
        "type": "string",
        "nullable": false
      },
      {
        "name": "data_type",
        "type": "string",
        "nullable": false
      },
      {
        "name": "data_parse",
        "type": "string",
        "nullable": true
      },

      {
        "name": "swifts",
        "type": "string",
        "nullable": true
      },
      {
        "name": "sinks",
        "type": "string",
        "nullable": false
      },
      {
        "name": "source_increment_topic",
        "type": "string",
        "nullable": false
      },
      {
        "name": "priority_id",
        "type": "long",
        "nullable": false
      },
      {
        "name": "kerberos",
        "type": "boolean",
        "nullable": false
      }
    ]
  },
  "payload": [
    {
      "tuple": [ 3,1,1,"2016-04-11 12:23:34.345123", "oracle.oracle02.db.table.v2.dbpar01.tablepar01","base64的json字符串",
        "ums/ums_extension","base64的schema","base64的json字符串","base64的json字符串", "source3",3,false]
    }
  ]
}

//swifts:
//{"pushdown_connection":[{"password":"SlJ*1s5d)(s","name_space":"mysql.stock.skytrain","connection_config":[],"jdbc_url":"jdbc:mysql://skytrain-new-wm.db.jishu.idc:3503/skytrain?characterEncoding=utf-8&autoReconnect=true","username":"skytrain"},{"password":"cExcNcm1","name_space":"oracle.zhxd.icp","connection_config":[],"jdbc_url":"jdbc:oracle:thin:@(DESCRIPTION=(FAILOVER = yes)(ADDRESS = (PROTOCOL = TCP)(HOST =127.0.0.1)(PORT = 1521))(CONNECT_DATA =(SERVER = DEDICATED)(SERVICE_NAME = zjdb5dg)))","username":"womhole_sele_icp"},{"password":"cExcNcm1","name_space":"oracle.zhxd.icp","connection_config":[],"jdbc_url":"jdbc:oracle:thin:@(DESCRIPTION=(FAILOVER = yes)(ADDRESS = (PROTOCOL = TCP)(HOST =10.120.11.15)(PORT = 1521))(CONNECT_DATA =(SERVER = DEDICATED)(SERVICE_NAME = zjdb5dg)))","username":"womhole_sele_icp"}],"dataframe_show":"false","action":"c3Bhcmtfc3FsID0gc2VsZWN0IEJTX0FQUExZX0lEIGFzIGFwcGx5aWQscHJvY2Vzc19ub2RlIGZyb20gdGNfYnNfdHJhbnNwb3J0IFdIRVJFICh1bXNfb3BfICE9ICdiJyBhbmQgdW1zX29wXyAhPSAnQicpIGFuZCB1cHBlcihzeXN0ZW1fc291cmNlX25hbWUpPSdYUycgYW5kIChzdWJzdHJpbmcocHJvY2Vzc19ub2RlLDAsaW5zdHIocHJvY2Vzc19ub2RlLCctJyktMSkgaW4gKCcxJywnMicsJzMnLCc0JywnNScsJzYnLCcxMicsJzE1JywnMTknKSBvciBwcm9jZXNzX25vZGUgaW4oJzAnLCcyMC0xJykpO3B1c2hkb3duX3NxbCBsZWZ0IGpvaW4gd2l0aCBteXNxbC5zdG9jay5za3l0cmFpbiA9IHNlbGVjdCBidXNpX3RhYmxlX25hbWUsb3JpZ2luYWxfc3RhdHVzX2NvbHVtbixhc3NpX3RhYmxlX2NvbHVtbixmaXJzdF9zdGF0dXMsc2Vjb25kX3N0YXR1cyx0aGlyZF9zdGF0dXMsb3JpZ2luYWxfY29kZSBmcm9tIGNzY19zdGF0dXNfbWFwcGluZyB3aGVyZSB1cHBlcihidXNpX3RhYmxlX25hbWUpPXVwcGVyKCd0Y19ic190cmFuc3BvcnQnKSBhbmQgKG9yaWdpbmFsX2NvZGUpIGluIChvcmFjbGUuZGI0XzMuY2xpYy50Y19ic190cmFuc3BvcnQucHJvY2Vzc19ub2RlKTtwdXNoZG93bl9zcWwgbGVmdCBqb2luIHdpdGggb3JhY2xlLnpoeGQuaWNwID0gc2VsZWN0IGFjY291bnRfaWQsdHJhbnNwcm90X2lkIGFzIGFwcGx5aWRfc3RvY2sgZnJvbSB0X2JlZV90cmFuc3BvcnQgd2hlcmUgKHRyYW5zcHJvdF9pZCkgaW4gKG9yYWNsZS5kYjRfMy5jbGljLnRjX2JzX3RyYW5zcG9ydC5hcHBseWlkKTtwdXNoZG93bl9zcWwgbGVmdCBqb2luIHdpdGggb3JhY2xlLnpoeGQuaWNwID0gc2VsZWN0IGFjY291bnRfaWQgYXMgbWFya2V0aW5nX2FjY291bnRfaWQsdF9tYW5nZXJfZGVwdG5vIGFzIG1hbmdlcl9kZXB0bm8sdF9tYW5nZXJfYmlncmVnaW9uaWQgYXMgZHFfaWQsdF9tYW5nZXJfcmVnaW9uaWQgYXMgZnFfaWQsdF9tYW5nZXJfY2VudGVyaWQgYXMgY3p4X2lkIGZyb20gdF9iZWVfbWFya2V0aW5nX2luZm8gd2hlcmUgKGFjY291bnRfaWQpIGluIChvcmFjbGUuZGI0XzMuY2xpYy50Y19ic190cmFuc3BvcnQuYWNjb3VudF9pZCk7c3Bhcmtfc3FsID0gc2VsZWN0IGFjY291bnRfaWQsYXBwbHlpZCxmaXJzdF9zdGF0dXMsc2Vjb25kX3N0YXR1cyx0aGlyZF9zdGF0dXMsbWFuZ2VyX2RlcHRubyxkcV9pZCxmcV9pZCxjenhfaWQgZnJvbSB0Y19ic190cmFuc3BvcnQgd2hlcmUgYWNjb3VudF9pZD4wOw==","swifts_specific_config":""}

//action in swifts:
//spark_sql = select BS_APPLY_ID as applyid,process_node from tc_bs_transport WHERE (ums_op_ != 'b' and ums_op_ != 'B') and upper(system_source_name)='XS' and (substring(process_node,0,instr(process_node,'-')-1) in ('1','2','3','4','5','6','12','15','19') or process_node in('0','20-1'));pushdown_sql left join with mysql.stock.skytrain = select busi_table_name,original_status_column,assi_table_column,first_status,second_status,third_status,original_code from csc_status_mapping where upper(busi_table_name)=upper('tc_bs_transport') and (original_code) in (oracle.db4_3.clic.tc_bs_transport.process_node);pushdown_sql left join with oracle.zhxd.icp = select account_id,transprot_id as applyid_stock from t_bee_transport where (transprot_id) in (oracle.db4_3.clic.tc_bs_transport.applyid);pushdown_sql left join with oracle.zhxd.icp = select account_id as marketing_account_id,t_manger_deptno as manger_deptno,t_manger_bigregionid as dq_id,t_manger_regionid as fq_id,t_manger_centerid as czx_id from t_bee_marketing_info where (account_id) in (oracle.db4_3.clic.tc_bs_transport.account_id);spark_sql = select account_id,applyid,first_status,second_status,third_status,manger_deptno,dq_id,fq_id,czx_id from tc_bs_transport where account_id>0;


//sinks:
//{"sink_connection_url": "jdbc:mysql://skytrain-new-wm.db.jishu.idc:3503/skytrain?characterEncoding=utf-8&autoReconnect=true","sink_connection_username": "skytrain","sink_connection_password": "SlJ*1s5d)(s","sink_table_keys": "applyid","sink_output": "","sink_connection_config": "","sink_process_class_fullname": "edp.wormhole.sinks.dbsink.Data2DbSink","sink_specific_config": {"db.system_fields_rename":"ums_ts_:ums_ts_xinsheng,ums_id_:ums_id_xinsheng,ums_active_:ums_active_xinsheng","mutation_type":"iud","db.sql_batch_size":100},"sink_retry_times": "3","sink_retry_seconds": "300"}


//consumption_protocol
//{"initial": false, "increment": true, "batch": false}
